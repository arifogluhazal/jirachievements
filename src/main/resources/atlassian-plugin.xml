<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">
  <plugin-info>
    <description>${project.description}</description>
    <version>${project.version}</version>
    <vendor name="${project.organization.name}" url="${project.organization.url}"/>
  </plugin-info>

  <ao key="ao-module">
    <description>The module configuring the Active Objects service used by this plugin</description>
    <entity>com.madgnome.jira.plugins.jirachievements.data.ao.Achievement</entity>
    <entity>com.madgnome.jira.plugins.jirachievements.data.ao.StatisticRef</entity>
    <entity>com.madgnome.jira.plugins.jirachievements.data.ao.UserAchievement</entity>
    <entity>com.madgnome.jira.plugins.jirachievements.data.ao.UserStatistic</entity>
    <entity>com.madgnome.jira.plugins.jirachievements.data.ao.UserWrapper</entity>
    <upgradeTask>com.madgnome.jira.plugins.jirachievements.data.upgrades.v1.InitDatabaseTask</upgradeTask>
  </ao>

  <component-import key="userManager" interface="com.atlassian.sal.api.user.UserManager"/>
  <component-import key="webResourceManager" interface="com.atlassian.plugin.webresource.WebResourceManager" />
  <component-import key="templateRenderer" interface="com.atlassian.templaterenderer.TemplateRenderer"/>
  <component-import key="eventPublisher" interface="com.atlassian.event.api.EventPublisher"/>

  <component-import key="ao" name="Active Objects service"
                    interface="com.atlassian.activeobjects.external.ActiveObjects">
    <description>Component to access Active Objects functionality from the plugin</description>
  </component-import>

  <component key="tx-processor" name="Transactional Annotation Processor"
             class="com.atlassian.activeobjects.external.TransactionalAnnotationProcessor">
    <decription>Processes @Transactional annotations.</decription>
  </component>

  <component key="issue-listener" class="com.madgnome.jira.plugins.jirachievements.listeners.IssueAchievementsEventListener"/>
  <component key="old-event-listener" class="com.madgnome.jira.plugins.jirachievements.listeners.OldFashionUserEventListener"/>
  <component key="event-listener" class="com.madgnome.jira.plugins.jirachievements.listeners.UserCreationEventListener"/>

  <component key="achievements-initializers" class="com.madgnome.jira.plugins.jirachievements.utils.initializers.AchievementsInitializer"/>
  <component key="plugin-initializers" class="com.madgnome.jira.plugins.jirachievements.PluginInitializer"/>

  <component key="achievementDaoService" class="com.madgnome.jira.plugins.jirachievements.data.services.impl.AchievementDaoService">
    <inteface>com.madgnome.jira.plugins.jirachievements.data.services.IAchievementDaoService</inteface>
  </component>

  <component key="statisticDaoService" class="com.madgnome.jira.plugins.jirachievements.data.services.impl.StatisticRefDaoService">
    <inteface>com.madgnome.jira.plugins.jirachievements.data.services.IStatisticRefDaoService</inteface>
  </component>

  <component key="userAchievementDaoService" class="com.madgnome.jira.plugins.jirachievements.data.services.impl.UserAchievementDaoService">
    <inteface>com.madgnome.jira.plugins.jirachievements.data.services.IUserAchievementDaoService</inteface>
  </component>

  <component key="userStatisticDaoService" class="com.madgnome.jira.plugins.jirachievements.data.services.impl.UserStatisticDaoService">
    <inteface>com.madgnome.jira.plugins.jirachievements.data.services.IUserStatisticDaoService</inteface>
  </component>

  <component key="userWrapperDaoService" class="com.madgnome.jira.plugins.jirachievements.data.services.impl.UserWrapperDaoService">
    <inteface>com.madgnome.jira.plugins.jirachievements.data.services.IUserWrapperDaoService</inteface>
  </component>

  <resource type="download" name="images/" location="includes/images/"/>
  <resource type="download" name="css/" location="includes/css/"/>
  <resource type="download" name="js/" location="includes/js/"/>

  <web-resource name="Notifications resources" key="ja-notification">
    <resource name="notification.js" type="download" location="includes/js/notification.js"/>
    <resource name="jquery.jgrowl_minimized.js" type="download" location="includes/js/plugins/jquery.jgrowl_minimized.js"/>
    <resource name="jquery.corner.js" type="download" location="includes/js/plugins/jquery.corner.js"/>
    <resource name="notification.css" type="download" location="includes/css/notification.css"/>
    <resource name="jquery.jgrowl.css" type="download" location="includes/css/plugins/jquery.jgrowl.css"/>
    <dependency>com.atlassian.auiplugin:ajs</dependency>

    <context>atl.general</context>
    <context>atl.admin</context>
  </web-resource>

  <view-profile-panel key="achievements-profile" i18n-name-key="Achievements"
                      name="User Profile Roadmap Panel"
                      class="com.madgnome.jira.plugins.jirachievements.ui.AchievementViewProfilePanel"
                      application="jira">
    <order>40</order>
  </view-profile-panel>

  <web-item key="achievements-page-link" section="system.user.options/personal">
    <label>Achievements</label>
    <link>/secure/ViewProfile.jspa#selectedTab=com.madgnome.jira.plugins.jirachievements:achievements-profile</link>
  </web-item>

  <!--<webwork1 key="achievements-page" name="My Achievements page" class="java.lang.Object">-->
    <!--<actions>-->
      <!--<action name="com.madgnome.jira.plugins.jirachievements.webwork.MyAchievementsAction" alias="MyAchievements">-->
        <!--<view name="success">/templates/com/madgnome/jira/plugins/jirachievements/achievements.vm</view>-->
      <!--</action>-->
    <!--</actions>-->
  <!--</webwork1>-->



  <rest key="rest-service-resources" path="/jirachievement" version="1.0">
    <description>Provides the REST resources for JIRAchievement plugin.</description>
  </rest>

  <!-- Rules -->
  <component key="padawanIssueEventRule" class="com.madgnome.jira.plugins.jirachievements.rules.PadawanIssueEventRule"/>

</atlassian-plugin>