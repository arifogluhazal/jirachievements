#* @vtlvariable name="achievement" type="com.madgnome.jira.plugins.jirachievements.data.ao.Achievement" *#
#set ($done = false)
#foreach($userAchievement in $userAchievements)
  #if ($userAchievement.ref == $achievement.ref)
    #set ($done = true)
  #end
#end

#if (!$achievement.hidden || $done)
  #set($imgUrl = "$req.contextPath/download/resources/com.madgnome.jira.plugins.jirachievements/images/achievements/${achievement.ref}.png")
#else
  #set($imgUrl = "$req.contextPath/download/resources/com.madgnome.jira.plugins.jirachievements/images/achievements/lock.png")
#end

<div class="achievement-full">
  <div class="achievement-image">
    <img src="$imgUrl"
         onerror="this.src='$req.contextPath/download/resources/com.madgnome.jira.plugins.jirachievements/images/achievements/default.png';"/>
  </div>
  <div class="achievement-content">
    #if (!$achievement.hidden || $done)
      <h4>
        $achievement.name
      </h4>
      <span>$achievement.catchPhrase</span>
    #else
      <h4>Achievement locked</h4>
      <span>That's a real mystery...</span>
    #end
  </div>
  <div class="achievement-level achievement-${achievement.difficulty.name().toLowerCase()}">&nbsp;</div>
  #if ($done == false)
    <div class="mask">
    </div>
  #end
</div>