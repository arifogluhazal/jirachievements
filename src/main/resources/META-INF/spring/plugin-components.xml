<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
             xmlns:osgi="http://www.springframework.org/schema/osgi"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd"
             default-autowire="autodetect"
             osgi:default-timeout="30000">

  <bean id="issueEventRuleEngine" class="com.madgnome.jira.plugins.jirachievements.rules.IssueEventRuleEngine" >
    <constructor-arg>
      <list>
        <ref bean="padawanIssueEventRule"/>
      </list>
    </constructor-arg>
  </bean>

  <bean id="statisticResource" class="com.madgnome.jira.plugins.jirachievements.rest.StatisticResource" >
    <constructor-arg>
      <list>
        <ref bean="openedByUserStatistic"/>
        <ref bean="resolvedByUserStatistic"/>
        <ref bean="closedByUserStatistic"/>
      </list>
    </constructor-arg>
  </bean>

  <bean id="pluginInitializers" class="com.madgnome.jira.plugins.jirachievements.PluginInitializer" >
    <constructor-arg type="com.madgnome.jira.plugins.jirachievements.data.services.IUserWrapperDaoService" ref="userWrapperDaoService"/>
    <constructor-arg type="com.atlassian.jira.user.util.UserUtil" ref="userUtil"/>
    <constructor-arg type="com.madgnome.jira.plugins.jirachievements.rules.WelcomeRule" ref="welcomeRule"/>
    <constructor-arg type="java.util.List">
      <list>
        <ref bean="achievementsInitializers"/>
        <ref bean="statisticsInitializers"/>
        <ref bean="levelsInitializers"/>
      </list>
    </constructor-arg>
  </bean>

</beans>
